---
stage: 2
status: done
---
Выражение `stackalloc` позволяет выделить блок памяти на стеке. Такая память автоматически освобождается по завершении метода. Блок памяти выделенный на стеке не подлежит сборке сборщиком мусора и не должен быть закреплён выражением fixed.

Можно присвоить результат выражения `stackalloc` к следующим типам:

- `System.Span<T>` или `System.ReadOnlySpan<T>`. Unsafe контект при таком использовании не требуется.
- Указатель. При таком использовании нужен unsafe контекст.

Количество памяти, которое можно выделить на стеке ограничено. Если выделить слишком много памяти, будет выброшено исключение `StackOverflowException`. Можно использовать условные конструкции, чтобы определить, выделить ли память на стеке или на куче.

Примерно позволяется выделить 1.5 МБ памяти