---
stage: 1
status: done
---
Делегат - тип, который представляет собой ссылку на методы с определённым списком параметров и возвращаемым типом. Методы могут быть как статическими, так и объекта. Затем можно будет вызвать метод используя объект делегата.

- Делегаты используются для передачи методов в качестве аргументов другим методам.
- Делегаты могут быть использованы для объявления callback методов
- Методы не обязаны полностью соответствовать типу делегата ([[Ковариантность и контравариантность]])
- [Лямбда выражения](Лямбда%20выражения%20и%20анонимные%20функции.md) - более удобный способ писать встроенные блоки кода. В некоторых случаях они компилируются в делегаты.

```csharp
public delegate int PerformCalculation(int x, int y);
```

Делегаты наследуют тип `Delegate`. От него нельзя создавать кастомные классы. Он может быть передан как аргумент или присвоен свойству. Метод может принимать делегат в качестве параметра и вызывать его где-то внутри. Это называется асинхронный колбек и часто используется, чтобы уведомить вызывающий метод о завершении длительной операции.

Когда делегат создаётся чтобы обернуть метод сущности, он получает ссылку и на сущность и на сам метод. В случае со статическими методами передаётся только метод.

Делегат может вызывать несколько методов (multicasting). Чтобы добавить дополнительный метод к списку методов делегата можно просто использовать `+`, чтобы убрать - `-`.

Когда вызывается такой делегат - все его методы вызываются по порядку. Если делегат использует ссылочные аргументы - ссылка передаётся последовательно и все изменения из прошлых методов становятся доступны последующим методам.

Когда любой из методов бросает необработанное исключение оно попадает в метод, вызвавший делегат. Следующие методы в цепочке не будут вызваны. Если делегат имеет возвращаемое значение и/или `out` параметры, он вернёт значение/параметры последнего вызванного метода.