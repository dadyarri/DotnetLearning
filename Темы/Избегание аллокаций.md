---
stage: 1
status: done
---
Работа над производительностью в .NET часто сводится к уменьшению количества аллокаций памяти. Каждый выделенный блок памяти рано или поздно должен быть освобождён. Уменьшение количества аллокаций уменьшает количество времени, проводимого в сборщике мусора.

Частая тактика - изменение важных типов с [[class]] на [[struct]], что изменяет семантику использования таких типов. Параметры и возвращаемые значения передаются по значению. Стоимость копирования незначительна, если тип небольшой (три слова или меньше, если словом считать размер одного integer). Для более крупных типов разница уже измерима и может оказывать значительное влияние на производительность. Такие типы могут быть переданы по ссылке. Компилятор генерирует достаточно надёжный код для того, чтобы избежать ошибок переполенения буфера или доступа к неразмеченной/освобождённой памяти.

